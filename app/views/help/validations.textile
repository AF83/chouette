---
layout: default
title: Validation
---

h3. Rôle

p. La validation permet d'effectuer un ensemble de contrôles syntaxiques, sématiques et structurels sur une offre de transport.
Elle se décompose en 3 phases (ou niveaux)

- Phase 1 := les données doivent respecter un format d'échange définissant une syntaxe et une sémantique précise (Actuellement seul le format Neptune est implémenté)
- Phase 2 := les données doivent respecter le niveau de complétude et de cohérence du format d'échange (Actuellement seul le format Neptune est implémenté).
- Phase 3 := l'offre est analysée dans ses fonctionnalités et subit des contrôles de réalisme, cette phase est indépendante du format d'échange. 

Les tests de validation sont décrits sur le site "chouette.mobi":http://www.chouette.mobi/spip.php?rubrique24

h3. Formats disponibles 

- Neptune := format normalisé des échanges de données de transport en commun pour la France (cf "Normalisation":normalisation)
- Données internes Chouette := tests sur les objets déjà importés ou créés/modifiés en base (Phase 3 uniquement)

h3. Activation

La validation peut être activée sur un fichier lors de son import en précisant les paramètres nécessaires à la phase 3.

L'onglet validation permet de réaliser un contrôle 'Phase 3' sur tout ou partie des lignes stockées en base. 

h3. Consultation des résultats

p. La validation est lancée en différé; son état d'avancement est affiché sous la forme d'une icône donc la couleur dépend de l'état:

- bleu : en cours
- vert : terminé correctement
- rouge : terminé en échec (la validation n'a pas pu aboutir, contacter l'administrateur système pour plus de détails)

p. Le résultat est conservé tant que la validation n'est pas supprimée.

p. La consultation du résultat de la validation donnera : 

p=. !validation.png!

* le lien 'Validation _n°_' permet de voir la liste des tests de validation effectués sur le jeu de données
* le lien 'Import' permet de voir le bilan d'import si la validation est faite sur fichiers 
* le lien 'Jeu de paramètres' permet de consulter les paramètres de seuils pour les tests de phase 3

h4. Résultats de validation

p=. !validation_result.png!

p. Le résultat de validation fournit 2 synthèses : 

# Synthèse des tests obligatoires
# Synthèse des tests optionnels

p. _1 - La synthèse des tests obligatoires affiche 3 secteurs_

p(border_image). !validation_mandatory_result.png!

* en vert les tests valides 
* en rouge les tests en échec
* en gris les tests non réalisables (contexte du test ne permettant pas de l'effectuer)

p(olnext). exemple : tests sur les accès avec aucun accès dans le jeu de données à valider

p. _2 - La synthèse des tests optionnels affiche 3 secteurs_

p(border_image). !validation_optionnal_result.png!

* en vert les tests valides 
* en jaune les tests en échec
* en gris les tests non réalisables (contexte du test ne permettant pas de l'effectuer)

p. Dans les 2 cas, la sélection d'un des secteurs affiche la liste des tests concernés avec le détail en cas d'erreur

p(border_image). !validation_mandatory_detail.png!

Une bulle d'information s'affiche en sélectionnant une icone bleue !notice.png! :

p(border_image). !validation_bulle.png!

En cas d'erreur, la localisation est fournie dans la colonne 'Détail': 

* pour les tests des phases 1 et 2, par l'emplacement (nom du fichier, ligne et colonne) de l'objet en erreur,
* pour les tests de la phase 3, par un lien vers la page de consultation de l'objet en erreur.

p(border_image). !validation_location.png!